{"type":"article","id":2337,"title":"以习近平思想指导ArchLinux安装（二）","uid":6382,"topics":[318,559,2413,2436,2448],"contents":"【前言】<br>\n<br>\n<i><u>注意：本篇为<a href=\"https://www.mohu.rocks/article/2326\">以习近平思想指导ArchLinux安装（一）的续作</a>，如果没看过上篇文章，请先阅览上篇文章再进行操作</u></i><br>\n<br>\n在<a href=\"https://www.mohu.rocks/article/2326\">上篇文章</a>我们通过战无不胜的习近平思想的指引下顺利的安装了Archlinux基本系统，如果一切妥当，那么打开计算机后我们会看到一个黑漆漆的全英文命令界面，对于大部分用户而言使用这样一个操作系统无疑是困难的，因此在本篇教程中，我们将继续秉持着“不忘初心，继续前进”的习近平思想，方便那些文化程度只有小学水平的用户继续完成Archlinux的安装，因此，本篇文章将继续使用通俗易懂的庆丰话进行写作，从而让每一个萨格尔王都能用上ArchLinux，如果有不当之处，请各位颐使气指的教师爷多多指教包涵。。<br>\n<br>\n【安装基本图形环境】<br>\n<br>\n首先安装最基础的xorg<br>\n<blockquote>pacman -S xorg-server xorg-apps</blockquote><br>\n然后请检查一下计算机的显卡种类，因为对于一些AMD/NVIDIA的显卡，还需要安装额外的组件包，对于Intel的显卡而言，安装这些软件包有助于提高核显的效率。否则会有在安装完图形操作界面后将无法显示精甚细腻的画面的风险（到时候一突开操作系统就花屏了怎么办？）。<br>\n<blockquote>lspci -k | grep -A 2 -E \"(VGA|3D)\"</blockquote><br>\n如果输出结果显示只有“AMD”（或者\"AMD\"和\"Intel\"同时出现），那么恭喜你，基本上只需要一行命令就可以解决驱动问题（假设你的AMD显卡比较新，属于<a href=\"https://zh.wikipedia.org/wiki/AMD_Radeon_HD_7000\" rel=\"nofollow noreferrer noopener\" target=\"_blank\">GCN架构</a>及更新的AMD显卡，否则请把下方的“xf86-video-amdgpu”替换成“xf86-video-ati”）<br>\n<blockquote>pacman -S&nbsp; xf86-video-amdgpu mesa lib32-mesa</blockquote><br>\n如果输出结果显示只有“Intel”，那么也同样恭喜你，基本上只需要一行命令就可以解决驱动问题<br>\n<blockquote>pacman -S&nbsp; mesa lib32-mesa</blockquote><br>\n如果输出结果显示出现了“NVIDIA”（无论是只出现了“NVIDIA”还是出现了“NVIDIA+AMD”或者“NVIDIA+Intel”等），那么很遗憾的告诉你，NVIDIA显卡驱动的问题很多，如果机器具备核心显卡或其他非NVIDIA显卡，请查阅计算机/主板说明书以临时屏蔽NVIDIA显卡继续进行安装，在这里受制于篇幅所限（后续文章可能会单独来讲），建议各位用户可以先去ArchWiki上参阅<a href=\"https://wiki.archlinux.org/index.php/NVIDIA_(简体中文)\" rel=\"nofollow noreferrer noopener\" target=\"_blank\">相关页面</a>，<s>（没办法，毕竟Fxxk NVIDIA不是白说的）</s>。<br>\n<br>\n【安装完整桌面环境】<br>\n<br>\n<b>习主席教导我们：“鞋子合不合脚穿着才知道，一个国家的发展道路，只有这个国家的人民才知道。”，因此，在安装桌面环境时，请尽量根据个人喜好来进行选择，这是GNU/Linux的优势之一，而Arch默认不带桌面环境，完全把这方面的选择交给了个人，因此可以先参考一下Archwiki上的<a href=\"https://wiki.archlinux.org/index.php/Desktop_environment_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)\" rel=\"nofollow noreferrer noopener\" target=\"_blank\">相关内容</a>再做出选择</b><br>\n<br>\n首先安装一个桌面环境管理器并激活（Gnome/KDE用户请忽略本小节）<br>\n<br>\n<blockquote>pacman -S gdm<br>\nsystemctl enable gdm</blockquote><br>\n（这里采用了GDM，你也可以把它换成更好看的SDDM，仅仅需要把“gdm”替换成“sddm”即可）<br>\n<br>\n然后选择一个桌面环境并安装（这里以xfce4为例，当然你也可以选择LxQt，但是LxQt最好配SDDM，xfce4不挑桌面环境管理器，但是推荐GDM）<br>\n<br>\n<blockquote>pacman -S xfce4 xfce4-goodies</blockquote><br>\n如果你需要使用无线网卡或者PPPOE拨号连接，那么你可能需要一个网络管理器，xfce4是默认不带网络管理器的（Gnome和KDE都默认自带，但是这类轻量化桌面环境基本上都不会自带！），因此请自行安装一个并激活使用，这里用NetworkManager（下面的命令大小写有区别，一定要区分清楚！），用有线网络+DHCP的用户可以忽略，不过还是推荐安装<br>\n<br>\n<blockquote>pacman -S network-manager-applet<br>\nsystemctl enable NetworkManager</blockquote><br>\n如果你用Gnome或者KDE，那么只需要两行代码即可<br>\n<br>\n<blockquote>pacman -S gnome gnome-extras<br>\nsystemctl enable gdm</blockquote><br>\n（Gnome，顺便带上Gnome项目开发的应用程序，如果不想要Gnome推荐的应用，请去掉“gnome-extras”）<br>\n<br>\n<blockquote>pacman -S&nbsp;plasma sddm kde-applications<br>\nsystemctl enable sddm</blockquote><br>\n（KDE，顺便带上KDE项目所开发的应用程序，如果不想要KDE推荐的应用，请将“kde-applications”换成“kdebase”）<br>\n<br>\n【实现全面中文化】<br>\n<br>\n<b>如果你是精通英语能够和美国的华莱士谈笑风生的长者，那么请直接忽略本小节</b>，否则请首先安装一个支持中文显示的字体，其他非英语的语言同理，不然会有乱码的风险，可以参考ArchWiki上的介绍。字体的<a href=\"https://wiki.archlinux.org/index.php/Fonts_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E4%B8%AD%E6%97%A5%E9%9F%A9%E8%B6%8A%E6%96%87%E5%AD%97\" rel=\"nofollow noreferrer noopener\" target=\"_blank\">清单</a>在这里，在清单里选取一个然后安装（这里用文泉驿黑体字体做演示），当然你也可以选择现在重启操作系统，在英文的桌面环境下直接从文件管理器里拷贝从其他操作系统复制到U盘里存储的字体并点击安装（不推荐，因为这样可能存在版权问题，虽然我是那么做的）<br>\n<br>\n<blockquote>pacman -S wqy-microhei wqy-zenhei</blockquote><br>\n编辑locale.conf文件（一次操作可以适用于全部账户）<br>\n<br>\n<blockquote>nano -w /etc/skel/.config/locale.conf</blockquote><br>\n在文件中写入以下字段并保存：<br>\n<br>\n<blockquote>LANG=zh_CN.UTF-8<br>\nLC_CTYPE=\"zh_CN.UTF-8\"<br>\nLC_NUMERIC=\"zh_CN.UTF-8\"<br>\nLC_TIME=\"zh_CN.UTF-8\"<br>\nLC_COLLATE=\"zh_CN.UTF-8\"<br>\nLC_MONETARY=\"zh_CN.UTF-8\"<br>\nLC_MESSAGES=\"zh_CN.UTF-8\"<br>\nLC_PAPER=\"zh_CN.UTF-8\"<br>\nLC_NAME=\"zh_CN.UTF-8\"<br>\nLC_ADDRESS=\"zh_CN.UTF-8\"<br>\nLC_TELEPHONE=\"zh_CN.UTF-8\"<br>\nLC_MEASUREMENT=\"zh_CN.UTF-8\"<br>\nLC_IDENTIFICATION=\"zh_CN.UTF-8\"<br>\nLC_ALL=</blockquote><br>\n按ctrl+O保存，如果提示Yes/No，选Yes按Enter即可。<br>\n<br>\n【新建用户】<br>\n<br>\n<b>如果你不怕操作系统这个小池塘被黑客的汪洋大海所掀翻，那么请直接忽略本小节</b>，否则请先配置好sudo以及创建一个普通账户。别看你今天直接用root账户当敢死队闹得欢，小心啊今后被rm -rf /*拉清单，头上三尺有脚本小子，这都得应验的。<br>\n<br>\n首先安装sudo（虽然我记得archlinux会默认安装sudo，但是以防万一还是安装一下为好，如果报错就说明已经安装过了，忽略即可），以便在使用普通账户登录的情况下临时调用root权限。<br>\n<br>\n<blockquote>pacman -S sudo</blockquote><br>\n虽然sudo的配置工具visudo采用vi这一金科律玉的编辑器，但是习主席曾经说过：“在人民面前，我们永远是小学生。”，因此我们将visudo的编辑器从默认的vi切换到小学生都会用的nano<br>\n<br>\n<blockquote>EDITOR=nano visudo</blockquote><br>\n然后配置一下sudo<br>\n<br>\n<blockquote>visudo /etc/sudoers</blockquote><br>\n打开后找到这两行，把第二行的“#”去掉：<br>\n<br>\n<blockquote>## Uncomment to allow members of group wheel to execute any command<br>\n# %wheel ALL=(ALL) ALL</blockquote><br>\n<br>\n按ctrl+O保存，如果提示Yes/No，选Yes按Enter即可。<br>\n<br>\n然后创建一个用户（这里以“sager”为例，实际上想起什么名字就能起什么名字，感谢 @白咲花 的<a href=\"https://www.mohu.rocks/article/item_id-14651\">投稿建议</a>，愿就各方一起深耕细作，共同绘制精甚细腻的乳包创作）<br>\n<br>\n<blockquote>useradd -m sager</blockquote><br>\n定义用户组<br>\n<br>\n<blockquote>usermod -aG wheel sager</blockquote><br>\n<br>\n<b>习主席教导我们：“没有网络安全就没有国家安全，没有信息化就没有现代化。”</b>，因此要给这个普通账户设置密码（注意：<b>本次设置的密码很重要，是你以后登录系统的凭据，请务必设定一个安全度高且易于记忆的密码</b>，和之前设置root密码一样，这个密码你无法看到，很正常），输入完后再输入一遍，直到输出“passwd: password updated successfully”为止，否则请再使用passwd设置账户密码<br>\n<br>\n<blockquote>passwd sager</blockquote><br>\n<br>\n【总结】<br>\n<br>\n如果以上操作都没有问题的话，那么你可以直接再次输入reboot命令重启了，重启后你会看到登录管理器在颐指气使的欢迎各位萨格尔王，输入帐户名和密码，然后就可以看到精甚细腻的桌面环境在等待着各位萨格尔王突开。习主席曾经说过：“人民对美好生活的向往，就是我们的奋斗目标。”，因此我们在使用前，还需要进行一点点的优化以符合各位萨格尔王的使用习惯，不过这是下一篇文章要讲的内容了。","date":"2020-06-15","agreeCount":12,"discussionCount":0}