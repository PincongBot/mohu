{"type":"article","id":2295,"title":"用python巡查膜乎新账号","uid":4516,"topics":[10,2413,2524],"contents":"'''<br>\n用python写成的，一款用来巡查膜乎新账号的工具<br>\n它的工作方式：运行这段python代码，然后就可以该干嘛干嘛了。当有新用户注册的时候，它会在浏览器当中打开弹窗。如果管理员在浏览器非InPrivate模式登陆了，看见有问题的ID可以直接突掉。<br>\nctrl+c结束巡查<br>\n<br>\n代码亲测可用，正在写注释，可能会不断更新<br>\n很惭愧，现在弄出的东西还too simple, sometimes naive<br>\n'''<br>\nimport os<br>\nimport subprocess<br>\nimport time<br>\n<br>\nstrL=\"open https://mohu.rocks/people/\"<br>\nstrR=\" -a /Applications/Firefox.app\"<br>\n'''<br>\n注：以上是OSX系统的指令，strR可选浏览器路径<br>\n<br>\nLinux替换成：<br>\nstrL=\"xdg-open https://mohu.rocks/people/\"<br>\nstrR=\"\"<br>\n<br>\nWindows替换成：<br>\nstrL=\"start https://mohu.rocks/people/\"<br>\nstrR=\"\"<br>\n'''<br>\ntry:<br>\n&nbsp;iniN=int(input(\"InitialID: \")) #最小的未注册用户id，目前是7427<br>\nexcept:<br>\n&nbsp;iniN=7500<br>\nrun=True<br>\ncurN=iniN #<br>\n<br>\ndef getpeople(x):<br>\n&nbsp;re=subprocess.getoutput(\"curl https://mohu.rocks/people/\"+str(x)).split(\"\\n\")[-1]<br>\n&nbsp;return re<br>\n<br>\ndefaultcurl=getpeople(10000)<br>\n<br>\n#如果输入的数字不准确，快速向上/向下扫描最后一个未注册ID<br>\nif getpeople(curN)!=defaultcurl:<br>\n&nbsp; scanFlag=True<br>\n&nbsp; print(\"Finding next unregistered ID...\")<br>\n&nbsp; while scanFlag:<br>\n&nbsp; &nbsp; curN+=1<br>\n&nbsp; &nbsp; time.sleep(0.1)<br>\n&nbsp; &nbsp; if getpeople(curN)==defaultcurl:<br>\n&nbsp; &nbsp; &nbsp; scanFlag=False<br>\n<br>\nif getpeople(curN-1)==defaultcurl:<br>\n&nbsp; scanFlag=True<br>\n&nbsp; print(\"Finding prev unregistered ID...\")<br>\n&nbsp; while scanFlag:<br>\n&nbsp; &nbsp; curN-=1<br>\n&nbsp; &nbsp; time.sleep(0.1)<br>\n&nbsp; &nbsp; if getpeople(curN-1)!=defaultcurl:<br>\n&nbsp; &nbsp; &nbsp; scanFlag=False<br>\n<br>\n<br>\n<br>\nprint(\"Now monitoring:\",curN)<br>\nwhile run:<br>\n&nbsp;try:<br>\n&nbsp; gotpeople=getpeople(curN)<br>\n&nbsp; if gotpeople!=defaultcurl:<br>\n&nbsp;&nbsp; os.system(strL+str(curN)+strR)<br>\n&nbsp;&nbsp; curN+=1<br>\n&nbsp;&nbsp; time.sleep(300)<br>\n&nbsp;&nbsp; print(\"Now monitoring:\",curN)<br>\n&nbsp; else:<br>\n&nbsp;&nbsp; time.sleep(30)<br>\n&nbsp;except KeyboardInterrupt:<br>\n&nbsp; run=False<br>\n&nbsp; print()<br>\n&nbsp; print(\"User Ended\")","date":"2020-06-10","agreeCount":8,"discussionCount":0}